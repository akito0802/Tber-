<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>音楽ジャンル図鑑</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>音楽ジャンル図鑑</h1>
  <div class="selector">
    <select id="main-genre"></select>
    <select id="sub-genre"></select>
  </div>
  <div class="details">
    <h2 id="genre-name"></h2>
    <p id="genre-description"></p>
    <h3>代表アーティスト</h3>
    <ul id="artists-list"></ul>
    <h3>代表曲</h3>
    <ul id="tracks-list"></ul>
    <h3>日本人アーティスト</h3>
    <ul id="japanese-artists"></ul>
  </div>
  <script src="genre-data.js"></script>
  <script src="subgenre-data.js"></script>
  <script>
    const mainSelect = document.getElementById("main-genre");
    const subSelect = document.getElementById("sub-genre");
    const nameElem = document.getElementById("genre-name");
    const descElem = document.getElementById("genre-description");
    const artistsList = document.getElementById("artists-list");
    const tracksList = document.getElementById("tracks-list");
    const japaneseList = document.getElementById("japanese-artists");

    Object.keys(genreMap).forEach(key => {
      const option = document.createElement("option");
      option.value = key;
      option.textContent = key;
      mainSelect.appendChild(option);
    });

    function updateSubGenres() {
      const main = mainSelect.value;
      subSelect.innerHTML = "";
      Object.keys(subgenreMap).forEach(key => {
        if (subgenreMap[key].大分類 === main) {
          const option = document.createElement("option");
          option.value = key;
          option.textContent = key;
          subSelect.appendChild(option);
        }
      });
      updateDetails();
    }

    function updateDetails() {
      const genre = subgenreMap[subSelect.value];
      if (!genre) return;
      nameElem.textContent = subSelect.value;
      descElem.textContent = genre.説明;
      artistsList.innerHTML = genre["代表アーティスト"].map(x => `<li>${x}</li>`).join("");
      tracksList.innerHTML = genre["代表曲"].map(x => `<li>${x}</li>`).join("");
      japaneseList.innerHTML = genre["日本人アーティスト"].map(x => `<li>${x}</li>`).join("");
    }

    mainSelect.addEventListener("change", updateSubGenres);
    subSelect.addEventListener("change", updateDetails);
    window.addEventListener("DOMContentLoaded", () => {
      mainSelect.selectedIndex = 0;
      updateSubGenres();
    });
  </script>
</body>
</html>